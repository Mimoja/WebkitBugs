------------------------------------------------------------------------
r49827 | abarth@webkit.org | 2009-10-20 03:19:01 +0200 (Di, 20. Okt 2009) | 34 Zeilen
Ge√§nderte Pfade:
   M /trunk/LayoutTests/ChangeLog
   A /trunk/LayoutTests/http/tests/security/popup-blocked-from-fake-event-expected.txt
   A /trunk/LayoutTests/http/tests/security/popup-blocked-from-fake-event.html
   M /trunk/WebCore/ChangeLog
   M /trunk/WebCore/bindings/js/ScriptController.cpp
   M /trunk/WebCore/bindings/v8/ScriptController.cpp
   M /trunk/WebCore/dom/Document.cpp
   M /trunk/WebCore/dom/Event.cpp
   M /trunk/WebCore/dom/Event.h

2009-10-19  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Bypass popup blocker using click event
        https://bugs.webkit.org/show_bug.cgi?id=21501

        Test that a fake event can't get around the popup blocker.

        * http/tests/security/popup-blocked-from-fake-event-expected.txt: Added.
        * http/tests/security/popup-blocked-from-fake-event.html: Added.
2009-10-19  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Bypass popup blocker using click event
        https://bugs.webkit.org/show_bug.cgi?id=21501

        Keep track of which events were generated by JavaScript and use that
        inforation when figuring out if we're processing a user gesture.

        Test: http/tests/security/popup-blocked-from-fake-event.html

        * bindings/js/ScriptController.cpp:
        (WebCore::ScriptController::processingUserGestureEvent):
        * bindings/v8/ScriptController.cpp:
        (WebCore::ScriptController::processingUserGesture):
        * dom/Document.cpp:
        (WebCore::Document::createEvent):
        * dom/Event.cpp:
        (WebCore::Event::Event):
        * dom/Event.h:
        (WebCore::Event::createdByDOM):
        (WebCore::Event::setCreatedByDOM):

